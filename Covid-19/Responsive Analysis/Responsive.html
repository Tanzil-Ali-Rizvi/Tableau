<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>COVID-19 Strategic Analysis Infographic</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f1f5f9;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 900px;
            margin-left: auto;
            margin-right: auto;
            height: 350px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 400px;
            }
        }
        .table-custom th, .table-custom td {
            padding: 0.75rem 1rem;
        }
        .flow-box {
            background-color: #f8fafc;
            border: 2px solid #e2e8f0;
            border-radius: 0.5rem;
            padding: 1rem;
            text-align: center;
            font-weight: 600;
            color: #003F5C;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
        }
        .flow-arrow {
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            font-weight: 800;
            color: #94a3b8;
        }
    </style>
</head>
<body class="text-slate-900">

    <main class="container mx-auto p-4 md:p-8 max-w-7xl">

        <header class="text-center my-8 md:my-12">
            <h1 class="text-4xl md:text-6xl font-extrabold text-[#003F5C]">COVID-19 Response Analysis</h1>
            <p class="text-xl md:text-2xl text-slate-600 mt-4 font-medium">A Strategic Prioritization Report</p>
        </header>

        <section class="grid grid-cols-1 md:grid-cols-3 gap-6 md:gap-8 mb-8">
            <div class="bg-white p-6 rounded-lg shadow-md text-center">
                <h3 class="text-sm font-semibold text-slate-500 uppercase tracking-wider">Total Confirmed Cases</h3>
                <p class="text-5xl font-extrabold text-[#003F5C] mt-2">32.0M</p>
                <p class="text-xs text-slate-400 mt-2">Based on latest cumulative data</p>
            </div>
            <div class="bg-white p-6 rounded-lg shadow-md text-center">
                <h3 class="text-sm font-semibold text-slate-500 uppercase tracking-wider">Total Deaths</h3>
                <p class="text-5xl font-extrabold text-[#D45087] mt-2">429K</p>
                <p class="text-xs text-slate-400 mt-2">Based on latest cumulative data</p>
            </div>
            <div class="bg-white p-6 rounded-lg shadow-md text-center">
                <h3 class="text-sm font-semibold text-slate-500 uppercase tracking-wider">National D1 $\rightarrow$ D2 Conversion</h3>
                <p class="text-5xl font-extrabold text-[#F95D6A] mt-2">28.39%</p>
                <p class="text-xs text-slate-400 mt-2">Indicates a 71.61% drop-off</p>
            </div>
        </section>

        <section class="grid grid-cols-1 lg:grid-cols-2 gap-6 md:gap-8 mb-8">
            <div class="bg-white p-6 md:p-8 rounded-lg shadow-md">
                <h2 class="text-2xl font-bold text-[#003F5C] mb-4">The Demographic Risk: Age Group Analysis</h2>
                <p class="text-slate-600 mb-6">
                    Analysis of confirmed cases reveals that the primary transmission vectors are not the most clinically vulnerable, but the most socially active. The 20-39 age brackets account for over 46% of all cases, highlighting a need to redefine risk beyond just clinical factors.
                </p>
                <ul class="text-slate-600 space-y-2">
                    <li><span class="font-bold text-[#FF7C43]">20-29 Age Group:</span> 24.86% of Cases</li>
                    <li><span class="font-bold text-[#FFA600]">30-39 Age Group:</span> 21.10% of Cases</li>
                    <li><span class="font-bold text-slate-700">Combined (20-39):</span> 45.96% of Total Cases</li>
                </ul>
            </div>
            <div class="bg-white p-6 md:p-8 rounded-lg shadow-md flex items-center justify-center">
                <div class="chart-container" style="height: 350px; max-height: 350px;">
                    <canvas id="ageChart"></canvas>
                </div>
            </div>
        </section>

        <section class="bg-white p-6 md:p-8 rounded-lg shadow-md mb-8">
            <h2 class="text-2xl font-bold text-[#003F5C] mb-4">The Intervention Gap: Vaccination Funnel Drop-off</h2>
            <p class="text-slate-600 max-w-4xl mb-6">
                The core strategic failure is the massive drop-off between the first and second vaccine doses. The stacked bar chart below visualizes this gap for the Top 5 states, which represent the largest absolute leaks in the system. The red portion signifies the millions of individuals who received a first dose but have not yet converted to a second.
            </p>
            <div class="chart-container" style="max-width: 1200px;">
                <canvas id="funnelChart"></canvas>
            </div>
        </section>

        <section class="grid grid-cols-1 lg:grid-cols-2 gap-6 md:gap-8 mb-8">
            <div class="bg-white p-6 md:p-8 rounded-lg shadow-md">
                <h2 class="text-2xl font-bold text-[#003F5C] mb-4">Geographic Segmentation: Where to Intervene</h2>
                <p class="text-slate-600 mb-6">
                    To effectively manage the intervention, resources must be targeted. This table, based on the `vaccine_funnel_table.md` data, ranks the Top 5 states by their **Absolute Dose Gap**. Uttar Pradesh and Madhya Pradesh are the highest priorities, representing a combined gap of over 61 million doses and the lowest conversion rates.
                </p>
                <div class="overflow-x-auto">
                    <table class="w-full table-auto table-custom text-left">
                        <thead class="bg-slate-50">
                            <tr>
                                <th class="text-slate-800">State</th>
                                <th class="text-slate-800 text-right">Absolute Dose Gap</th>
                                <th class="text-slate-800 text-right">Conversion Rate</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-slate-100">
                            <tr class="font-bold">
                                <td>Uttar Pradesh</td>
                                <td class="text-right text-[#F95D6A]">37,417,252</td>
                                <td class="text-right text-[#F95D6A]">18.54%</td>
                            </tr>
                            <tr class="font-bold">
                                <td>Madhya Pradesh</td>
                                <td class="text-right text-[#F95D6A]">23,989,396</td>
                                <td class="text-right text-[#F95D6A]">19.29%</td>
                            </tr>
                            <tr>
                                <td>Maharashtra</td>
                                <td class="text-right text-[#D45087]">22,928,258</td>
                                <td class="text-right text-[#003F5C]">34.57%</td>
                            </tr>
                            <tr>
                                <td>Gujarat</td>
                                <td class="text-right text-[#D45087]">19,050,069</td>
                                <td class="text-right text-[#003F5C]">32.21%</td>
                            </tr>
                            <tr>
                                <td>Bihar</td>
                                <td class="text-right text-[#F95D6A]">18,865,403</td>
                                <td class="text-right text-[#F95D6A]">19.21%</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            
            <div class="bg-white p-6 md:p-8 rounded-lg shadow-md">
                <h2 class="text-2xl font-bold text-[#003F5C] mb-4">Strategic Blind Spot: Volume vs. Intensity</h2>
                <p class="text-slate-600 mb-6">
                    A critical data deficiency is the focus on "Total Tests" (a volume metric) over "Positivity Rate" (an intensity metric). A state can have low testing volume but a high positivity rate, indicating a severe, uncontrolled outbreak. Future systems must prioritize the intensity metric.
                </p>
                <div class="overflow-x-auto">
                    <table class="w-full table-auto table-custom text-left">
                        <thead class="bg-slate-50">
                            <tr>
                                <th class="text-slate-800">State</th>
                                <th class="text-slate-800">Total Tests (Volume)</th>
                                <th class="text-slate-800">Positivity Rate (Intensity)</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-slate-100">
                            <tr>
                                <td>State A (e.g., Uttar Pradesh)</td>
                                <td class="font-medium text-slate-800">10,000,000 (Rank 1)</td>
                                <td class="font-medium text-slate-800">1.5% (Rank 10)</td>
                            </tr>
                            <tr class="bg-red-50">
                                <td class="font-bold">State B (e.g., Kerala)</td>
                                <td class="font-bold text-slate-800">5,000,000 (Rank 5)</td>
                                <td class="font-bold text-[#D45087]">8.0% (Rank 1)</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <p class="text-sm text-slate-500 mt-4">This table uses illustrative data to show that State B is in a more critical situation, despite having half the testing volume of State A.</p>
            </div>
        </section>

        <section class="bg-white p-6 md:p-8 rounded-lg shadow-md mb-8">
            <h2 class="text-2xl font-bold text-center text-[#003F5C] mb-8">Future-Proofing: Strategic System Recommendations</h2>
            <div class="space-y-10">
                <div class="grid grid-cols-1 md:grid-cols-5 gap-4 items-center">
                    <div class="flow-box md:col-span-2">Flag Individuals 7+ Days Overdue for D2</div>
                    <div class="flow-arrow hidden md:block">&rarr;</div>
                    <div class="flow-arrow md:hidden text-center my-2">&darr;</div>
                    <div class="flow-box md:col-span-2">Trigger Automated, Multi-Channel Alerts (SMS, Call, ASHA Worker)</div>
                    <div class="flow-arrow md:col-span-1 hidden md:block">&rarr;</div>
                    <div class="flow-arrow md:hidden text-center my-2">&darr;</div>
                    <div class="flow-box md:col-span-5 lg:col-span-1">Conversion</div>
                    <div class="md:col-span-5 text-center mt-2">
                        <h3 class="font-bold text-[#665191]">1. Systemic Re-engagement Funnel</h3>
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-5 gap-4 items-center">
                    <div class="flow-box">Dynamic Risk Model</div>
                    <div class="flow-arrow hidden md:block">+</div>
                    <div class="flow-arrow md:hidden text-center my-2">&darr;</div>
                    <div class="flow-box">Age $\times$ Occupation Data</div>
                    <div class="flow-arrow hidden md:block">&rarr;</div>
                    <div class="flow-arrow md:hidden text-center my-2">&darr;</div>
                    <div class="flow-box md:col-span-3">Prioritize Critical Infrastructure Workers (not just clinical risk)</div>
                    <div class="md:col-span-5 text-center mt-2">
                        <h3 class="font-bold text-[#A05195]">2. Dynamic Risk Tiering</h3>
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-5 gap-4 items-center">
                    <div class="flow-box md:col-span-2">Map Infrastructure (Labs, ICU Beds)</div>
                    <div class="flow-arrow hidden md:block">+</div>
                    <div class="flow-arrow md:hidden text-center my-2">&darr;</div>
                    <div class="flow-box md:col-span-2">Run 30-Day Case Forecast</div>
                    <div class="flow-arrow hidden md:block">&rarr;</div>
                    <div class="flow-arrow md:hidden text-center my-2">&darr;</div>
                    <div class="flow-box md:col-span-5 lg:col-span-1">Proactive Resource Diversion</div>
                    <div class="md:col-span-5 text-center mt-2">
                        <h3 class="font-bold text-[#D45087]">3. Capacity vs. Demand Mapping</h3>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <footer class="text-center p-8 text-slate-500 text-sm">
        <p>COVID-19 Strategic Analysis Report | Data sourced from provided CSVs and project context.</p>
        <p>This infographic is a single-page application built with HTML, Tailwind CSS, and Chart.js.</p>
    </footer>

    <script>
        window.onload = function () {
            
            const wrapText = (label) => {
                const maxLength = 16;
                if (label.length <= maxLength) {
                    return label;
                }
                const words = label.split(' ');
                let lines = [];
                let currentLine = '';
                for (const word of words) {
                    if ((currentLine + ' ' + word).trim().length > maxLength) {
                        lines.push(currentLine.trim());
                        currentLine = word;
                    } else {
                        currentLine = (currentLine + ' ' + word).trim();
                    }
                }
                if (currentLine) {
                    lines.push(currentLine.trim());
                }
                return lines;
            };

            const tooltipTitleCallback = (tooltipItems) => {
                const item = tooltipItems[0];
                let label = item.chart.data.labels[item.dataIndex];
                if (Array.isArray(label)) {
                    return label.join(' ');
                } else {
                    return label;
                }
            };

            const commonOptions = {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        labels: {
                            color: '#0f172a'
                        }
                    },
                    tooltip: {
                        callbacks: {
                            title: tooltipTitleCallback
                        }
                    }
                },
                scales: {
                    x: {
                        ticks: { color: '#475569' },
                        grid: { display: false }
                    },
                    y: {
                        ticks: { color: '#475569' },
                        grid: { color: '#e2e8f0' }
                    }
                }
            };

            const ageChartCtx = document.getElementById('ageChart').getContext('2d');
            new Chart(ageChartCtx, {
                type: 'doughnut',
                data: {
                    labels: ['20-29', '30-39', '40-49', '60-69', '50-59', '10-19', '70-79', '0-9', '>=80', 'Missing'],
                    datasets: [{
                        label: 'Total Cases by Age Group',
                        data: [172, 146, 112, 89, 77, 27, 28, 22, 10, 9],
                        backgroundColor: [
                            '#FF7C43', 
                            '#FFA600', 
                            '#A05195', 
                            '#665191', 
                            '#2F4B7C', 
                            '#003F5C', 
                            '#D45087', 
                            '#F95D6A',
                            '#fde047',
                            '#cbd5e1'
                        ],
                        hoverOffset: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'right',
                            labels: {
                                color: '#0f172a'
                            }
                        },
                        tooltip: {
                            callbacks: {
                                title: tooltipTitleCallback
                            }
                        }
                    }
                }
            });

            const funnelChartCtx = document.getElementById('funnelChart').getContext('2d');
            new Chart(funnelChartCtx, {
                type: 'bar',
                data: {
                    labels: [
                        wrapText('Uttar Pradesh (18.54%)'), 
                        wrapText('Madhya Pradesh (19.29%)'), 
                        wrapText('Maharashtra (34.57%)'), 
                        wrapText('Gujarat (32.21%)'), 
                        wrapText('Bihar (19.21%)')
                    ],
                    datasets: [
                        {
                            label: 'Second Dose (Converted)',
                            data: [8515236, 5733640, 12112554, 9051153, 4484768],
                            backgroundColor: '#665191',
                        },
                        {
                            label: 'Dose Gap (Not Converted)',
                            data: [37417252, 23989396, 22928258, 19050069, 18865403],
                            backgroundColor: '#F95D6A',
                        }
                    ]
                },
                options: {
                    ...commonOptions,
                    indexAxis: 'y',
                    scales: {
                        x: {
                            stacked: true,
                            ticks: { color: '#475569' },
                            grid: { display: false }
                        },
                        y: {
                            stacked: true,
                            ticks: { color: '#475569', autoSkip: false },
                            grid: { color: '#e2e8f0' }
                        }
                    }
                }
            });
        };
    </script>
</body>
</html>
